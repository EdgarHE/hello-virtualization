Vagrant.configure("2") do |config|
  config.vm.define :frontend do |frontend|
    # frontend.vm.provider "virtualbox" do |v|
    #   v.customize ["modifyvm", :id, "--name", "frontend", "--memory", "2048"]
    #  end
    frontend.vm.box = "gbarbieru/xenial"
    frontend.vm.hostname = "frontend"
    frontend.vm.network :private_network, ip: "192.168.88.88"
    frontend.vm.provision "shell", inline: <<-SHELL
      apt-get update
      apt-get install -y apache2
      echo "<!Doctype HTML><html><head><title>Hello Frontend!</title></head><body><H1>Hello Frontend !</H1><p> Frontend VM </p></body></html>" > /var/www/html/index.html
    SHELL
  end

  config.vm.define :backend do |backend|
    # backend.vm.provider "virtualbox" do |v|
    #   v.customize ["modifyvm", :id, "--name", "backend", "--memory", "2048"]
    # end
    backend.vm.box = "gbarbieru/xenial"
    backend.vm.hostname = "backend"
    backend.vm.network :private_network, ip: "192.168.88.89"
    backend.vm.provision "shell", inline: <<-SHELL
      apt-get update
      apt-get install -y apache2
      echo "<!Doctype HTML><html><head><title>Hello Backend!</title></head><body><H1>Hello Backend !</H1><p> Backend VM </p></body></html>" > /var/www/html/index.html
    SHELL
  end
end